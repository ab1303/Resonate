(function(){angular.module("validation",["validation.provider","validation.directive"]);angular.module("validation.provider",[]);angular.module("validation.directive",["validation.provider"])}).call(this),function(){function n(){var i,n,s,r,u,t=this,h=function(t){i=t;n=i.get("$rootScope");s=i.get("$http");r=i.get("$q");u=i.get("$timeout")},f={},e=null,o={};this.setExpression=function(n){return angular.extend(f,n),t};this.getExpression=function(n){return f[n]};this.setDefaultMsg=function(n){return angular.extend(o,n),t};this.getDefaultMsg=function(n){return o[n]};this.setValidMethod=function(n){e=n};this.getValidMethod=function(){return e};this.setErrorHTML=function(n){if(n.constructor===Function)return t.getErrorHTML=n,t};this.getErrorHTML=function(n){return'<p class="validation-invalid">'+n+"<\/p>"};this.setSuccessHTML=function(n){if(n.constructor===Function)return t.getSuccessHTML=n,t};this.getSuccessHTML=function(n){return'<p class="validation-valid">'+n+"<\/p>"};this.showSuccessMessage=!0;this.showErrorMessage=!0;this.checkValid=function(n){return!!(n&&n.$valid)};this.validate=function(i){var f=r.defer(),o=0,s,e;if(i===undefined)return console.error("This is not a regular Form name scope"),f.reject("This is not a regular Form name scope"),f.promise;if(i.validationId)n.$broadcast(i.$name+"submit-"+i.validationId,o++);else if(i.constructor===Array)for(s in i)n.$broadcast(i[s].$name+"submit-"+i[s].validationId,o++);else for(e in i)e[0]!=="$"&&i[e].hasOwnProperty("$dirty")&&n.$broadcast(e+"submit-"+i[e].validationId,o++);return f.promise.success=function(n){return f.promise.then(function(t){n(t)}),f.promise},f.promise.error=function(n){return f.promise.then(null,function(t){n(t)}),f.promise},u(function(){t.checkValid(i)?f.resolve("success"):f.reject("error")}),f.promise};this.validCallback=null;this.invalidCallback=null;this.resetCallback=null;this.reset=function(t){var r,i;if(t===undefined){console.error("This is not a regular Form name scope");return}if(t.validationId)n.$broadcast(t.$name+"reset-"+t.validationId);else if(t.constructor===Array)for(r in t)n.$broadcast(t[r].$name+"reset-"+t[r].validationId);else for(i in t)i[0]!=="$"&&t[i].hasOwnProperty("$dirty")&&n.$broadcast(i+"reset-"+t[i].validationId)};this.$get=["$injector",function(n){return h(n),{setValidMethod:this.setValidMethod,getValidMethod:this.getValidMethod,setErrorHTML:this.setErrorHTML,getErrorHTML:this.getErrorHTML,setSuccessHTML:this.setSuccessHTML,getSuccessHTML:this.getSuccessHTML,setExpression:this.setExpression,getExpression:this.getExpression,setDefaultMsg:this.setDefaultMsg,getDefaultMsg:this.getDefaultMsg,showSuccessMessage:this.showSuccessMessage,showErrorMessage:this.showErrorMessage,checkValid:this.checkValid,validate:this.validate,validCallback:this.validCallback,invalidCallback:this.invalidCallback,resetCallback:this.resetCallback,reset:this.reset}}]}angular.module("validation.provider").provider("$validation",n)}.call(this),function(){function n(n){var t=n.get("$validation"),i=n.get("$timeout"),r=n.get("$parse");return{link:function(n,u,f){var e=r(f.validationReset)(n);i(function(){u.on("click",function(n){n.preventDefault();t.reset(e)})})}}}angular.module("validation.directive").directive("validationReset",n);n.$inject=["$injector"]}.call(this),function(){function n(n){var i=n.get("$validation"),r=n.get("$timeout"),t=n.get("$parse");return{priority:1,require:"?ngClick",link:function(n,u,f){var e=t(f.validationSubmit)(n);r(function(){u.off("click");u.on("click",function(r){r.preventDefault();i.validate(e).success(function(){t(f.ngClick)(n)})})})}}}angular.module("validation.directive").directive("validationSubmit",n);n.$inject=["$injector"]}.call(this),function(){function n(n){var t=n.get("$validation"),o=n.get("$q"),f=n.get("$timeout"),e=n.get("$parse"),s=function(n,i,r,u,f,o){var h=i||t.getDefaultMsg(r).success,c=e("success"),s;return s=o.messageId?angular.element(document.querySelector("#"+o.messageId)):n.parent().hasClass("input-group")?n.parent().next():n.siblings(".validation-message-elem"),n.attr("no-validation-message")?s.css("display","none"):t.showSuccessMessage&&h?(s.html(t.getSuccessHTML(h)),s.css("display","")):s.css("display","none"),f.$setValidity(f.$name,!0),c&&c({message:h}),t.validCallback&&t.validCallback(n),!0},h=function(n,i,r,u,f,o){var h=i||t.getDefaultMsg(r).error,c=e("error"),s;return s=o.messageId?angular.element(document.querySelector("#"+o.messageId)):n.parent().hasClass("input-group")?n.parent().next():n.siblings(".validation-message-elem"),n.attr("no-validation-message")?s.css("display","none"):t.showErrorMessage&&h?(s.html(t.getErrorHTML(h)),s.css("display","")):s.css("display","none"),f.$setValidity(f.$name,!1),c&&c({message:h}),t.invalidCallback&&t.invalidCallback(n),!1},r={},i=function(n,r,u,f,e,c){var b=e.slice(0),v=b[0].trim(),y=v.indexOf("="),l=y===-1?v:v.substr(0,y),k=y===-1?null:v.substr(y+1),p=b.slice(1),d=l+"SuccessMessage",g=l+"ErrorMessage",w=t.getExpression(l),a={success:function(){return s(r,u[d],l,n,f,u),p.length?i(n,r,u,f,p,c):!0},error:function(){return h(r,u[g],l,n,f,u)}};return w===undefined?(console.error('You are using undefined validator "%s"',l),p.length)?i(n,r,u,f,p,c):void 0:w.constructor===Function?o.all([t.getExpression(l)(c,n,r,u,k)]).then(function(n){return n&&n.length>0&&n[0]?a.success():a.error()},function(){return a.error()}):w.constructor===RegExp?c!==undefined&&c!==null?t.getExpression(l).test(c)?a.success():a.error():a.error():a.error()},u=function(){return((1+Math.random())*65536|0).toString(16).substring(1)},c=function(){return u()+u()+u()+u()};return{restrict:"A",require:"ngModel",link:function(n,u,e,o){var l=function(){},h=e.validator.split(","),a=o.validationId=c(),v,s;if(typeof n.initialValidity=="boolean"&&(v=n.initialValidity),e.messageId||u.after('<span class="validation-message-elem"><\/span>'),o.$setValidity(o.$name,v),n.$on(o.$name+"reset-"+a,function(){l();f(function(){o.$setViewValue("");o.$setPristine();o.$setValidity(o.$name,undefined);o.$render();e.messageId?angular.element(document.querySelector("#"+e.messageId)).html(""):u.next().html("");t.resetCallback&&t.resetCallback(u)})}),s=angular.isUndefined(e.validMethod)?t.getValidMethod():e.validMethod,n.$on(o.$name+"submit-"+a,function(t,c){var y=o.$viewValue,a=!1,v;a=i(n,u,e,o,h,y);s==="submit"&&(l(),l=n.$watch(function(){return n.$eval(e.ngModel)},function(t,r){t!==r&&((t===undefined||t===null)&&(t=""),a=i(n,u,e,o,h,t))}));v=function(n){n?delete r[c]:(r[c]=u[0],f(function(){r[Math.min.apply(null,Object.keys(r))].focus()},0))};a.constructor===Object?a.then(v):v(a)}),s==="blur"){u.bind("blur",function(){var t=n.$eval(e.ngModel);n.$apply(function(){i(n,u,e,o,h,t)})});return}s!=="submit"&&s!=="submit-only"&&(n.$watch(function(){return n.$eval(e.ngModel)},function(t,r){if(o.$pristine&&o.$viewValue)o.$setViewValue(o.$viewValue);else if(o.$pristine){e.messageId?angular.element(document.querySelector("#"+e.messageId)).html(""):u.siblings(".validation-message-elem").html("");return}t!==r&&i(n,u,e,o,h,t)}),f(function(){e.$observe("noValidationMessage",function(n){var t;t=e.messageId?angular.element(document.querySelector("#"+e.messageId)):u.next();n==="true"||n===!0?t.css("display","none"):(n==="false"||n===!1)&&t.css("display","block")})}))}}}angular.module("validation.directive").directive("validator",n);n.$inject=["$injector"]}.call(this);
//# sourceMappingURL=angular-validation.min.js.map
